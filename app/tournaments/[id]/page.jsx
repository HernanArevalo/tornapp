import tournaments from '../../../data/tournaments.json';
import styles from './tournament.module.css';

const tournament = tournaments['abc']

export const metadata = {
  title: `Torneo - ${tournament.name.toUpperCase()}`,
  description: 'Generated by create next app'
}


const fetchTournament = async() => {
  return fetch('https://apiv3.apifootball.com/?action=get_standings&league_id=152&APIkey=481770da3abeb3802b4f5fbeafdb2c93faee538ebff7194ba0594a3b81d84fdf')
  .then(res => res.json())
}

export default async function TournamentId ({ params }) {

 const tournament = await fetchTournament();

  return (
    <>
      <div>
        <h2 className={ styles.tournamentName }>{tournament[0]?.league_name}</h2>

        <table>
          <thead>
              <tr>
                <th></th>
                <th>EQUIPO</th>
                <th>PJ</th>
                <th>PG</th>
                <th>PE</th>
                <th>PP</th>
                <th>PT</th>
              </tr>
          </thead>
          <tbody>
            { tournament.slice(0,15).map((team, idx) =>(
              <tr key={team.name}>
                <td>{idx+1}</td>
                <td className={styles.teamName}>{team.team_name}</td>
                <td>{team.overall_league_payed}</td>
                <td>{team.overall_league_W}</td>
                <td>{team.overall_league_D}</td>
                <td>{team.overall_league_L}</td>
                <td>{team.overall_league_PTS}</td>
              </tr>
            ))}
          </tbody>
        </table>

      </div>
    </>
  )
}
